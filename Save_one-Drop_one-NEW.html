<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/icone.png">
    <title>Save one Drop one</title>
    <link rel="stylesheet" href="style.css">
</head>
    <header>
        <h1><span class="color1">K-Pop</span> <span class="color2">Website</span></h1>
        <h2 class="subtitle">Save one Drop one</h2>
    </header>

    <nav>
        <ul>
            <li><a href="index.html"><img src="./images/Accueil.png" alt="Accueil"></a></li>
            <li><a href="Save_one-Drop_one.html"><img src="./images/Save_one-Drop_one.png" alt="Save One Drop One"></a></li>
            <li><a href="Blind_ranking.html"><img src="./images/Blind_ranking.png" alt="Blind Ranking"></a></li>
            <li><a href="Blind_test.html"><img src="./images/Blind_test.png" alt="Blind Test"></a></li>
            <li><a href="Statistiques.html"><img src="./images/Statistiques.png" alt="Statistiques"></a></li>
        </ul>
    </nav>


    <!-- Single video mode -->
    <div id="single-video" class="single-video">
        <video id="videoA" autoplay muted></video>
    </div>

    <!-- Second video mode -->
    <div id="second-video" class="single-video hidden">
        <video id="videoB" autoplay muted></video>
    </div>

    <!-- Both videos mode -->
    <div id="dual-videos" class="video-container hidden">
        <video id="choiceA" muted></video>
        <video id="choiceB" muted></video>
    </div>

    <script>
        const videoSources = [
            'videos/video1.mp4',
            'videos/video2.mp4',
            'videos/video3.mp4',
            'videos/video4.mp4'
            // Ajoute autant de vidéos que nécessaire
        ];

        function getRandomVideo(exclude = null) {
            let choices = videoSources.filter(src => src !== exclude);
            return choices[Math.floor(Math.random() * choices.length)];
        }

        function startChallenge() {
            document.getElementById('dual-videos').classList.add('hidden');
            document.getElementById('second-video').classList.add('hidden');
            document.getElementById('single-video').classList.remove('hidden');

            let videoA = getRandomVideo();
            document.getElementById('videoA').src = videoA;

            document.getElementById('videoA').onended = () => {
                document.getElementById('single-video').classList.add('hidden');
                document.getElementById('second-video').classList.remove('hidden');
                let videoB = getRandomVideo(videoA);
                document.getElementById('videoB').src = videoB;

                document.getElementById('videoB').onended = () => {
                    document.getElementById('second-video').classList.add('hidden');
                    document.getElementById('dual-videos').classList.remove('hidden');

                    document.getElementById('choiceA').src = videoA;
                    document.getElementById('choiceB').src = videoB;

                    // Réactive les vidéos pour rejouer sans son
                    document.getElementById('choiceA').play();
                    document.getElementById('choiceB').play();
                };
            };
        }

        document.getElementById('choiceA').onclick = () => {
            alert('Tu as choisi la vidéo de gauche');
            startChallenge();
        };

        document.getElementById('choiceB').onclick = () => {
            alert('Tu as choisi la vidéo de droite');
            startChallenge();
        };

        // Lancer la première boucle
        startChallenge();
    </script>
    
</body>
</html>
