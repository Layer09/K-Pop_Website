<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>K-Pop Filters</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    .filters-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .filter {
      display: flex;
      flex-direction: column;
      font-size: 0.9em;
    }

    .filter label {
      color: #00c5d5;
      font-weight: bold;
    }

    .filter input {
      padding: 5px;
      border-radius: 4px;
      border: 1px solid #8a6ace;
      background-color: #222;
      color: white;
    }

    #toggle-more {
      background-color: transparent;
      border: 1px solid #8a6ace;
      color: #8a6ace;
      padding: 6px 10px;
      cursor: pointer;
      border-radius: 4px;
      height: fit-content;
      margin-top: 20px;
    }

    .hidden {
      display: none;
    }

    .line {
      width: 100%;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

  <div class="filters-container">
    <div class="filter">
      <label for="artist">Artiste</label>
      <input type="text" id="artist" />
    </div>
    <div class="filter">
      <label for="title">Titre</label>
      <input type="text" id="title" />
    </div>
    <div class="filter">
      <label for="year">Année</label>
      <input type="text" id="year" />
    </div>
    <button id="toggle-more">Plus de filtres</button>

    <div id="more-filters" class="hidden line">
      <div class="filter">
        <label for="id">ID</label>
        <input type="text" id="id" />
      </div>
      <div class="filter">
        <label for="episode">Épisode</label>
        <input type="text" id="episode" />
      </div>
      <div class="filter">
        <label for="number">Numéro</label>
        <input type="text" id="number" />
      </div>
      <div class="filter">
        <label for="generation">Génération</label>
        <input type="text" id="generation" />
      </div>
      <div class="filter">
        <label for="company">Compagnie</label>
        <input type="text" id="company" />
      </div>
      <div class="filter">
        <label for="sex">Sexe</label>
        <input type="text" id="sex" />
      </div>
      <div class="filter">
        <label for="size">Taille</label>
        <input type="text" id="size" />
      </div>
    </div>
  </div>

  <script>
    const toggleBtn = document.getElementById("toggle-more");
    const moreFilters = document.getElementById("more-filters");

    toggleBtn.addEventListener("click", () => {
      moreFilters.classList.toggle("hidden");
      toggleBtn.textContent = moreFilters.classList.contains("hidden") ? "Plus de filtres" : "Moins de filtres";
    });

    function updateDisplay() {
      const filters = {
        artist: document.getElementById("artist").value.trim().toLowerCase(),
        title: document.getElementById("title").value.trim().toLowerCase(),
        year: document.getElementById("year").value.trim(),
        id: document.getElementById("id")?.value.trim(),
        episode: document.getElementById("episode")?.value.trim(),
        number: document.getElementById("number")?.value.trim(),
        generation: document.getElementById("generation")?.value.trim(),
        company: document.getElementById("company")?.value.trim(),
        sex: document.getElementById("sex")?.value.trim(),
        size: document.getElementById("size")?.value.trim()
      };

      console.log("Filtres appliqués :", filters);

      // TODO: Filtrer les données et mettre à jour l'affichage ici
    }

    // Appliquer le filtre automatiquement à chaque modification
    document.querySelectorAll("input").forEach(input => {
      input.addEventListener("input", updateDisplay);
    });

    // Charger le CSV (tu pourras filtrer les résultats dans `updateDisplay`)
    let csvData = [];
    Papa.parse("./Donnees_CSV/Titres.csv", {
      download: true,
      header: true,
      dynamicTyping: true,
      complete: function(results) {
        csvData = results.data;
        console.log("CSV chargé :", csvData.length, "lignes");
      }
    });
  </script>
</body>
</html>
